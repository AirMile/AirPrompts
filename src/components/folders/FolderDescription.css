/* Markdown Editor Custom Styling */
.markdown-editor-wrapper {
  width: 100%;
}

/* Light mode styling */
.markdown-editor-wrapper[data-color-mode="light"] {
  --color-prettylights-syntax-comment: #6e7781;
  --color-prettylights-syntax-constant: #0550ae;
  --color-prettylights-syntax-entity: #8250df;
  --color-prettylights-syntax-storage-modifier-import: #24292f;
  --color-prettylights-syntax-entity-tag: #116329;
  --color-prettylights-syntax-keyword: #cf222e;
  --color-prettylights-syntax-string: #0a3069;
  --color-prettylights-syntax-variable: #953800;
  --color-prettylights-syntax-brackethighlighter-unmatched: #82071e;
  --color-prettylights-syntax-invalid-illegal-text: #f6f8fa;
  --color-prettylights-syntax-invalid-illegal-bg: #82071e;
  --color-prettylights-syntax-carriage-return-text: #f6f8fa;
  --color-prettylights-syntax-carriage-return-bg: #cf222e;
  --color-prettylights-syntax-string-regexp: #116329;
  --color-prettylights-syntax-markup-list: #3b2300;
  --color-prettylights-syntax-markup-heading: #0550ae;
  --color-prettylights-syntax-markup-italic: #24292f;
  --color-prettylights-syntax-markup-bold: #24292f;
  --color-prettylights-syntax-markup-deleted-text: #82071e;
  --color-prettylights-syntax-markup-deleted-bg: #ffebe9;
  --color-prettylights-syntax-markup-inserted-text: #116329;
  --color-prettylights-syntax-markup-inserted-bg: #dafbe1;
  --color-prettylights-syntax-markup-changed-text: #953800;
  --color-prettylights-syntax-markup-changed-bg: #ffd8b5;
  --color-prettylights-syntax-markup-ignored-text: #eaeef2;
  --color-prettylights-syntax-markup-ignored-bg: #0550ae;
  --color-prettylights-syntax-meta-diff-range: #8250df;
  --color-prettylights-syntax-brackethighlighter-angle: #57606a;
  --color-prettylights-syntax-sublimelinter-gutter-mark: #818b98;
  --color-prettylights-syntax-constant-other-reference-link: #0a3069;
}

/* Dark mode styling */
.markdown-editor-wrapper[data-color-mode="dark"] {
  --color-prettylights-syntax-comment: #8b949e;
  --color-prettylights-syntax-constant: #79c0ff;
  --color-prettylights-syntax-entity: #d2a8ff;
  --color-prettylights-syntax-storage-modifier-import: #c9d1d9;
  --color-prettylights-syntax-entity-tag: #7ee83f;
  --color-prettylights-syntax-keyword: #ff7b72;
  --color-prettylights-syntax-string: #a5d6ff;
  --color-prettylights-syntax-variable: #ffa657;
  --color-prettylights-syntax-brackethighlighter-unmatched: #f85149;
  --color-prettylights-syntax-invalid-illegal-text: #f0f6fc;
  --color-prettylights-syntax-invalid-illegal-bg: #8e1519;
  --color-prettylights-syntax-carriage-return-text: #f0f6fc;
  --color-prettylights-syntax-carriage-return-bg: #b62324;
  --color-prettylights-syntax-string-regexp: #7ee83f;
  --color-prettylights-syntax-markup-list: #f2cc60;
  --color-prettylights-syntax-markup-heading: #1f6feb;
  --color-prettylights-syntax-markup-italic: #c9d1d9;
  --color-prettylights-syntax-markup-bold: #c9d1d9;
  --color-prettylights-syntax-markup-deleted-text: #ffdcd7;
  --color-prettylights-syntax-markup-deleted-bg: #67060c;
  --color-prettylights-syntax-markup-inserted-text: #aff5b4;
  --color-prettylights-syntax-markup-inserted-bg: #033a16;
  --color-prettylights-syntax-markup-changed-text: #ffdfb6;
  --color-prettylights-syntax-markup-changed-bg: #5a1e02;
  --color-prettylights-syntax-markup-ignored-text: #c9d1d9;
  --color-prettylights-syntax-markup-ignored-bg: #1158c7;
  --color-prettylights-syntax-meta-diff-range: #d2a8ff;
  --color-prettylights-syntax-brackethighlighter-angle: #8b949e;
  --color-prettylights-syntax-sublimelinter-gutter-mark: #484f58;
  --color-prettylights-syntax-constant-other-reference-link: #a5d6ff;
}

/* Override default container styles */
.markdown-editor-wrapper .w-md-editor {
  background-color: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* Fix pre-element positioning to match textarea exactly */
.markdown-editor-wrapper .w-md-editor-text-pre {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100% !important;
  height: 100% !important;
  pointer-events: none !important;
  z-index: 0 !important;
  overflow: hidden !important;
  /* Force same box model */
  box-sizing: border-box !important;
}

/* CRITICAL: Identical styling for both pre and textarea elements */
.markdown-editor-wrapper .w-md-editor-text-input,
.markdown-editor-wrapper .w-md-editor-text,
.markdown-editor-wrapper .w-md-editor-text-pre {
  font-size: 14px !important;
  line-height: 20px !important;
  font-family: 'Consolas', 'Monaco', 'Courier New', monospace !important;
  padding: 12px !important;
  margin: 0 !important;
  border: none !important;
  outline: none !important;
  background: transparent !important;
  white-space: pre-wrap !important;
  word-wrap: break-word !important;
  tab-size: 2 !important;
  box-sizing: border-box !important;
  /* Force identical text rendering */
  letter-spacing: 0 !important;
  word-spacing: 0 !important;
  text-indent: 0 !important;
  text-transform: none !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
}

/* Ensure the container has proper dimensions */
.markdown-editor-wrapper .w-md-editor-text {
  position: relative !important;
  width: 100% !important;
  height: 300px !important;
  overflow: auto !important;
}

/* Color styling for both textarea and pre element */
.markdown-editor-wrapper .w-md-editor-text-input,
.markdown-editor-wrapper .w-md-editor-text-pre {
  color: rgb(55 65 81) !important;
}

.markdown-editor-wrapper .w-md-editor-text-input {
  caret-color: rgb(55 65 81) !important;
}

.dark .markdown-editor-wrapper .w-md-editor-text-input,
.dark .markdown-editor-wrapper .w-md-editor-text-pre {
  color: rgb(209 213 219) !important;
}

.dark .markdown-editor-wrapper .w-md-editor-text-input {
  caret-color: rgb(209 213 219) !important;
}

/* Preview styles */
.markdown-editor-wrapper .wmde-markdown {
  background-color: transparent !important;
  color: rgb(55 65 81) !important;
  font-size: 0.875rem !important;
  line-height: 1.25rem !important;
}

.dark .markdown-editor-wrapper .wmde-markdown {
  color: rgb(209 213 219) !important;
}

/* Headers in preview */
.markdown-editor-wrapper .wmde-markdown h1,
.markdown-editor-wrapper .wmde-markdown h2,
.markdown-editor-wrapper .wmde-markdown h3,
.markdown-editor-wrapper .wmde-markdown h4 {
  color: rgb(31 41 55) !important;
  font-weight: 600 !important;
  margin: 1rem 0 0.5rem 0 !important;
}

.dark .markdown-editor-wrapper .wmde-markdown h1,
.dark .markdown-editor-wrapper .wmde-markdown h2,
.dark .markdown-editor-wrapper .wmde-markdown h3,
.dark .markdown-editor-wrapper .wmde-markdown h4 {
  color: rgb(243 244 246) !important;
}

/* Links in preview */
.markdown-editor-wrapper .wmde-markdown a {
  color: rgb(59 130 246) !important;
  text-decoration: underline !important;
}

.dark .markdown-editor-wrapper .wmde-markdown a {
  color: rgb(96 165 250) !important;
}

/* Lists */
.markdown-editor-wrapper .wmde-markdown ul,
.markdown-editor-wrapper .wmde-markdown ol {
  margin-left: 1.5rem !important;
  margin-bottom: 0.75rem !important;
}

.markdown-editor-wrapper .wmde-markdown li {
  margin-bottom: 0.25rem !important;
}

/* Code blocks */
.markdown-editor-wrapper .wmde-markdown pre {
  background-color: rgb(243 244 246) !important;
  border: 1px solid rgb(229 231 235) !important;
  border-radius: 0.375rem !important;
  padding: 0.75rem !important;
  margin-bottom: 0.75rem !important;
}

.dark .markdown-editor-wrapper .wmde-markdown pre {
  background-color: rgb(31 41 55) !important;
  border-color: rgb(55 65 81) !important;
}

.markdown-editor-wrapper .wmde-markdown code {
  font-family: 'Consolas', 'Monaco', 'Courier New', monospace !important;
  font-size: 0.875em !important;
  background-color: rgb(243 244 246) !important;
  padding: 0.125rem 0.25rem !important;
  border-radius: 0.25rem !important;
  color: rgb(220 38 38) !important;
}

.dark .markdown-editor-wrapper .wmde-markdown code {
  background-color: rgb(31 41 55) !important;
  color: rgb(248 113 113) !important;
}

.markdown-editor-wrapper .wmde-markdown pre code {
  background-color: transparent !important;
  padding: 0 !important;
  color: inherit !important;
}

/* Blockquotes */
.markdown-editor-wrapper .wmde-markdown blockquote {
  border-left: 4px solid rgb(229 231 235) !important;
  padding-left: 1rem !important;
  margin-left: 0 !important;
  margin-bottom: 0.75rem !important;
  color: rgb(107 114 128) !important;
  font-style: italic !important;
}

.dark .markdown-editor-wrapper .wmde-markdown blockquote {
  border-left-color: rgb(55 65 81) !important;
  color: rgb(156 163 175) !important;
}

/* Tables */
.markdown-editor-wrapper .wmde-markdown table {
  border-collapse: collapse !important;
  margin-bottom: 0.75rem !important;
  width: 100% !important;
}

.markdown-editor-wrapper .wmde-markdown th,
.markdown-editor-wrapper .wmde-markdown td {
  border: 1px solid rgb(229 231 235) !important;
  padding: 0.5rem !important;
  text-align: left !important;
}

.dark .markdown-editor-wrapper .wmde-markdown th,
.dark .markdown-editor-wrapper .wmde-markdown td {
  border-color: rgb(55 65 81) !important;
}

/* Remove default padding from container */
.markdown-editor-wrapper .w-md-editor-content {
  padding: 0 !important;
  height: 100% !important;
  position: relative !important;
}

/* Ensure text container is properly sized */
.markdown-editor-wrapper .w-md-editor-text-container {
  position: relative !important;
  width: 100% !important;
  height: 100% !important;
}

/* Hide toolbar completely */
.markdown-editor-wrapper .w-md-editor-toolbar {
  display: none !important;
}

/* CRITICAL: Position textarea to match pre-element exactly */
.markdown-editor-wrapper textarea.w-md-editor-text-input {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  z-index: 10 !important;
  resize: none !important;
  width: 100% !important;
  height: 100% !important;
  min-height: 300px !important;
  color: inherit !important;
  caret-color: red !important; /* DEBUG: Make cursor red to see where it is */
  background: rgba(255, 0, 0, 0.1) !important; /* DEBUG: Light red background */
  /* Force same box model */
  box-sizing: border-box !important;
}

/* DEBUG: Make pre element visible with different background */
.markdown-editor-wrapper .w-md-editor-text-pre {
  background: rgba(0, 255, 0, 0.1) !important; /* DEBUG: Light green background */
}

/* Auto-scroll to cursor position */
.markdown-editor-wrapper .w-md-editor-text {
  height: 300px !important;
  overflow: hidden !important;
}

/* Ensure proper scrolling behavior */
.markdown-editor-wrapper .w-md-editor-content {
  height: 100% !important;
  overflow: hidden !important;
}

/* Live preview container */
.markdown-editor-wrapper .w-md-editor-preview {
  min-height: 6rem !important;
  background: transparent !important;
  padding: 0 !important;
}

/* Split mode divider */
.markdown-editor-wrapper .w-md-editor-bar {
  display: none !important;
}

/* Remove box shadows */
.markdown-editor-wrapper .w-md-editor.w-md-editor-focus {
  box-shadow: none !important;
}

.markdown-editor-wrapper .w-md-editor-preview .wmde-markdown {
  padding: 0 !important;
}

/* Scrollbar styling for markdown editor */
.markdown-editor-wrapper ::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.markdown-editor-wrapper ::-webkit-scrollbar-track {
  background: rgb(var(--color-secondary-100));
}

.markdown-editor-wrapper ::-webkit-scrollbar-thumb {
  background-color: rgb(var(--color-secondary-300));
  border-radius: 4px;
}

.markdown-editor-wrapper ::-webkit-scrollbar-thumb:hover {
  background-color: rgb(var(--color-secondary-400));
}

.dark .markdown-editor-wrapper ::-webkit-scrollbar-track {
  background: rgb(var(--color-secondary-800));
}

.dark .markdown-editor-wrapper ::-webkit-scrollbar-thumb {
  background-color: rgb(var(--color-secondary-600));
}

.dark .markdown-editor-wrapper ::-webkit-scrollbar-thumb:hover {
  background-color: rgb(var(--color-secondary-500));
}

/* Context textarea - remove all borders and outlines */
.context-textarea,
.context-textarea:focus,
.context-textarea:active,
.context-textarea:hover {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  ring: none !important;
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
  appearance: none !important;
}